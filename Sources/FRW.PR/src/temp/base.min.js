/*! siteBase */
function ajusterAccessibiliteLiens(){$("main").find('a[target="_blank"]').each(function(){var n=$(this),t;n.attr("href")&&(n.attr("href").endsWith(".pdf")||n.hasClass("sans-lien-externe")||(n.hasClass("lien-externe")||n.find(".lien-externe").length||n.addClass("lien-externe"),n.find(".sr-only").length===0&&(t=obtenirTexteEdite("txtcacheCommunOuvertureLienNouvelOnglet"),n.append('<span class="sr-only">{0}<\/span>'.format(t)))))})}function definirTrappeErreurGlboale(){window.onerror=function(n,t,i,r,u){var f="",e;if(u)e=u.stack,f=u.toString(),e&&(f+=`
 Stack : ${e}`);else try{const t=(new Error).stack;f=`Message : ${n} 
Ligne : ${i} 
Colonne : ${r} 
Stack : ${t}`}catch(o){f=`Message : ${n} 
Ligne : ${i} 
Colonne : ${r}`}return journaliserErreurJs(f),!1};window.addEventListener("unhandledrejection",function(n){journaliserErreurJs(n.reason.stack)})}function journaliserErreurJs(n){executerRequeteAjax("/api/log/error",{url:window.location.href,message:JSON.stringify(n,maskInfo,2)})}function journaliserInformationJs(n){executerRequeteAjax("/api/log/information",{url:window.location.href,message:JSON.stringify(n)})}function maskInfo(n,t){var r=t,i;if(n.includes("data")){i="";try{i=JSON.parse(t)}catch(u){}r=JSON.stringify(i,maskData,2)}return r}function maskData(n,t){var i=t;return n.includes("courriel")&&(i="*****"),n.includes("Nas")&&(i="*****"),n.includes("nas")&&(i="*****"),n.includes("NumeroAssuranceSociale")&&(i="*****"),n.includes("Nam")&&(i="*****"),n.includes("nam")&&(i="*****"),n.includes("NumeroAssuranceMaladie")&&(i="*****"),n=="motPasse"&&(i="*****"),i}function executerRequeteAjaxBase(n,t){return t=t||{},$.ajax({type:"POST",url:n,beforeSend:function(n){n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]:first').val())},data:t})}function executerRequeteAjaxBaseGet(n,t,i){return t=t||{},i=i!==!1,$.ajax({type:"GET",url:n,beforeSend:function(n){i?n.setRequestHeader("session_id",SESSION_ID):n.setRequestHeader("cache-control","no-cache")},data:t})}function executerRequeteAjaxGet(n,t,i,r){return executerRequeteAjax(n,t,i,"GET",r)}function executerRequeteAjax(n,t,i,r,u){r=r||"POST";u=u!==!1;var f=$.Deferred(function(){var e,o;t=t||{};i&&i.find(".traitement-en-cours").length==0&&(afficherChargementEnCours(i),document.activeElement&&$(document.activeElement).is("button, input[type=submit]")&&(e=i.find(".traitement-en-cours"),e.focus(),e.get(0).scrollIntoView(),window.scrollBy(0,-48)));switch(r){case"POST":o=executerRequeteAjaxBase;break;case"GET":o=executerRequeteAjaxBaseGet;break;default:alert("Méthode "+r+" non gérée.")}o(n,t,u).done(function(n){if(n&&n.resultat&&n.resultat==="redirection"&&n.url)window.location.href=n.url,f.resolve(n);else if(i){var t=document.activeElement&&$(document.activeElement).is(".traitement-en-cours");i.fadeTo(50,.2,function(){i.html(n);f.resolve(n);i.fadeTo(350,1,function(){if(t){var n=obtenirElementsFocusables(i.get(0));n.length>0?n[0].focus():i.focus()}})})}else f.resolve(n)}).fail(function(n){if(i){var t=document.activeElement&&$(document.activeElement).is(".traitement-en-cours");i.fadeTo(50,.2,function(){i.html('<div class="info-non-disponible d-flex flex-column align-items-center" tabindex="0"><div aria-hidden="true" class="utd-icone-svg avertissement lg"><\/div><div class="texte utd-text-base">{0}<\/div><\/div>'.format(obtenirTexteEdite("messageCommunInformationNonDisponible")));f.reject(n);i.fadeTo(350,1,function(){if(t){var n=obtenirElementsFocusables(i.get(0));n.length>0?n[0].focus():i.focus()}})})}else f.reject(n)})});return f.promise()}function afficherChargementEnCours(n,t){var e={taille:"md",position:"text-center",afficherTexte:!1,texte:obtenirTexteEdite("texteCommunChargementEnCours"),overlay:!1,affichageDansBouton:!1},r,f,u,i;t=$.extend({},e,t);r='<div class="texte sr-only">{0}<\/div>'.format(t.texte);r=t.afficherTexte?r.replace("sr-only",""):r;f=t.overlay?"avec-overlay":"";u='<div class="traitement-en-cours {0} {1} {2}" tabindex="0" role="status"><div class="spinner"><\/div>{3}<\/div>';u=u.format(f,t.taille,t.position,r);i=$(u);n.height()>0?(i.width(n.width()),i.height(n.height())):i.css("position","relative");n.html(i);i.css("opacity",1)}function definirLienMultilingue(n){var t=n,i=$("html").attr("lang");return i!="fr"&&(t.startsWith("/")||(t="/"+t),t.toLowerCase().startsWith("/"+i)||(t="/"+i+"/"+t.substring(1))),t}function obtenirElementsFocusables(n){return n.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input:not([type="hidden"]):not([disabled]), select:not([disabled])')}function obtenirElementsFocusablesFormulaire(n){return n.find("input, select, textarea, button").not("[disabled], :hidden")}function genererId(){return Date.now().toString(36)+"-"+Math.random().toString(36).substr(2,9)}definirTrappeErreurGlboale();$(document).ready(function(){ajusterAccessibiliteLiens();$(".espaceur-conteneurs:visible:last").addClass("dernier-visible")});String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});